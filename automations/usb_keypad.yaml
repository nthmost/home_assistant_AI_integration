# USB Wireless Numpad Configuration for Home Assistant
# Device: Compx 2.4G Wireless Receiver

# Linux Event Integration
# This reads keypresses from the USB keypad and generates events in Home Assistant
linux_event:
  - name: Wireless Numpad
    device: /dev/input/by-id/usb-Compx_2.4G_Wireless_Receiver-event-kbd

---
# Example Automations for Numpad Control

# Numpad 1: Toggle Office Lights
- id: keypad_num1_office_lights
  alias: "Keypad: 1 = Toggle Office Lights"
  description: "Press numpad 1 to toggle office lights"

  trigger:
    - platform: event
      event_type: linux_event
      event_data:
        device_name: Wireless Numpad
        key_code: 79  # KEY_KP1
        key_state: 1  # 1 = key pressed, 0 = released

  action:
    - service: remote.send_command
      target:
        entity_id: remote.office_lights
      data:
        device: "Office Lights"
        command: ["Power"]

# Numpad 2: Toggle Tube Lamp
- id: keypad_num2_tube_lamp
  alias: "Keypad: 2 = Toggle Tube Lamp"
  description: "Press numpad 2 to toggle tube lamp"

  trigger:
    - platform: event
      event_type: linux_event
      event_data:
        device_name: Wireless Numpad
        key_code: 80  # KEY_KP2
        key_state: 1

  action:
    - service: light.toggle
      target:
        entity_id: light.tube_lamp

# Numpad 3: Toggle Govee TV Bars
- id: keypad_num3_govee_bars
  alias: "Keypad: 3 = Toggle Govee TV Bars"
  description: "Press numpad 3 to toggle Govee RGB TV bars"

  trigger:
    - platform: event
      event_type: linux_event
      event_data:
        device_name: Wireless Numpad
        key_code: 81  # KEY_KP3
        key_state: 1

  action:
    - service: light.toggle
      target:
        entity_id: light.rgbic_tv_light_bars

# Numpad Plus: Brightness Up
- id: keypad_plus_brightness_up
  alias: "Keypad: + = Increase Brightness"
  description: "Press numpad plus to increase brightness of all lights"

  trigger:
    - platform: event
      event_type: linux_event
      event_data:
        device_name: Wireless Numpad
        key_code: 78  # KEY_KPPLUS
        key_state: 1

  action:
    - service: light.turn_on
      target:
        entity_id:
          - light.tube_lamp
          - light.rgbic_tv_light_bars
      data:
        brightness_step_pct: 10
    - service: remote.send_command
      target:
        entity_id: remote.office_lights
      data:
        device: "Office Lights"
        command: ["Light+"]

# Numpad Minus: Brightness Down
- id: keypad_minus_brightness_down
  alias: "Keypad: - = Decrease Brightness"
  description: "Press numpad minus to decrease brightness of all lights"

  trigger:
    - platform: event
      event_type: linux_event
      event_data:
        device_name: Wireless Numpad
        key_code: 74  # KEY_KPMINUS
        key_state: 1

  action:
    - service: light.turn_on
      target:
        entity_id:
          - light.tube_lamp
          - light.rgbic_tv_light_bars
      data:
        brightness_step_pct: -10
    - service: remote.send_command
      target:
        entity_id: remote.office_lights
      data:
        device: "Office Lights"
        command: ["Light-"]

# Numpad 0: All Lights Off
- id: keypad_num0_all_off
  alias: "Keypad: 0 = All Lights Off"
  description: "Press numpad 0 to turn off all lights"

  trigger:
    - platform: event
      event_type: linux_event
      event_data:
        device_name: Wireless Numpad
        key_code: 82  # KEY_KP0
        key_state: 1

  action:
    - service: light.turn_off
      target:
        entity_id:
          - light.tube_lamp
          - light.rgbic_tv_light_bars
    - service: remote.send_command
      target:
        entity_id: remote.office_lights
      data:
        device: "Office Lights"
        command: ["Power"]

# Numpad Enter: Trigger Sunrise Lights
- id: keypad_enter_sunrise
  alias: "Keypad: Enter = Trigger Sunrise Lights"
  description: "Press numpad enter to start the sunrise lighting sequence"

  trigger:
    - platform: event
      event_type: linux_event
      event_data:
        device_name: Wireless Numpad
        key_code: 96  # KEY_KPENTER
        key_state: 1

  action:
    - service: automation.trigger
      target:
        entity_id: automation.wake_up_lights_gentle_sunrise_all_3_systems
